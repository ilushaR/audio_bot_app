(this.webpackJsonpaudio_bot_app=this.webpackJsonpaudio_bot_app||[]).push([[0],{158:function(e,t,a){e.exports=a(248)},247:function(e,t,a){},248:function(e,t,a){"use strict";a.r(t);a(159),a(185),a(187),a(188),a(190),a(191),a(192),a(193),a(194),a(195),a(196),a(197),a(199),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(207),a(208),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227);var n=a(0),r=a.n(n),c=a(81),i=a.n(c),s=a(14),o=a.n(s),l=a(33),u=a.n(l),d=a(51),p=a(82),h=a(83),m=a(88),k=a(87),g=a(21),f=(a(246),a(247),function(e){Object(m.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).pickedTracks=[],n.vkId=null,n.telegramId=null,n.icon="data:image/svg+xml;charset=utf-8,%3Csvg%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22m0%200h24v24h-24z%22%20opacity%3D%22.4%22%2F%3E%3Cpath%20d%3D%22m13%2011.4849987v5.6482897c0%204.5123987-.8747233%205.3834431-4.37440289%205.8421935-1.6682259.2186769-3.62559711-.5384568-3.62559711-3.1617096%200-1.2814037.80181302-2.498263%202.46114282-2.8162494%201.26723039-.2428462-.09078118.0181935%202.77607228-.5140396.6959753-.1292083.7748413-.3782301.7748413-.908791%200-.2664094-.0013183-2.5951438-.0022416-4.1936475l-.0073943-.0003862v-4.31781414s-.0054461-2.05827203%200-3.08739758c.0065136-1.23086488.6796458-1.68321833%202.6637921-2.08397579%200%200%203.0232113-.57396781%204.6852252-.87541989.367783-.06670761.6485622.07018054.6485622.49202579%200%200-.0106774%202.62210108%200%204.05433854.0031006.41590408-.168424.60420104-.5899711.67902227-1.6816987.29848801-4.8649278.86036181-4.8649278.86036181-.3738792.09182758-.5451011.35499958-.5451011.73329156z%22%20fill%3D%22%236f99c8%22%20fill-rule%3D%22nonzero%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E",n.API_URL="https://s23209.h10.modhost.pro",n.onCheckboxChange=function(e){var t=JSON.parse(e.currentTarget.dataset.track);n.pickedTracks[t.index]=n.pickedTracks[t.index]?null:{url:t.url,title:t.title,artist:t.artist}},n.sendTracks=function(){n.pickedTracks=n.pickedTracks.filter((function(e){return!!e})),n.pickedTracks.length&&fetch("".concat(n.API_URL,"/sendTracks?id=").concat(n.telegramId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.pickedTracks)})},n.state={scheme:"bright_light",tracks:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.a.subscribe(function(){var e=Object(d.a)(u.a.mark((function e(a){var n,r,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.detail,r=n.type,c=n.data,"VKWebAppUpdateConfig"!==r){e.next=5;break}t.setState({scheme:c.scheme}),e.next=27;break;case 5:if("VKWebAppInitResult"!==r){e.next=27;break}return e.next=8,o.a.send("VKWebAppGetUserInfo",{});case 8:return t.vkId=e.sent.id,e.next=11,o.a.send("VKWebAppStorageGet",{keys:["telegramId"]});case 11:if(t.telegramId=e.sent.keys[0].value,console.log(t.telegramId),!1!==t.telegramId&&"false"!==t.telegramId){e.next=26;break}return e.next=16,fetch("".concat(t.API_URL,"/getUser?id=").concat(t.vkId)).then((function(e){return e.json()}));case 16:return i=e.sent,console.log(i),i.permission,t.telegramId=i.telegramId,t.telegramId,e.next=24,o.a.send("VKWebAppStorageSet",{key:"telegramId",value:"".concat(t.telegramId)});case 24:s=e.sent,console.log(s);case 26:fetch("".concat(t.API_URL,"/getTracks?id=").concat(t.vkId)).then((function(e){return e.json()})).then((function(e){t.pickedTracks=new Array(e.tracks.length),t.setState({tracks:e.tracks})}));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(g.d,{scheme:this.state.scheme},r.a.createElement(g.k,{activePanel:"main"},r.a.createElement(g.g,{id:"main"},r.a.createElement(g.h,null,"Audio Bot"),this.state.tracks.map((function(t,a){return r.a.createElement(g.e,{key:t.id},r.a.createElement(g.j,{before:r.a.createElement(g.b,{size:"m",style:{width:40,height:40,marginRight:10,background:"url(".concat(t.album&&t.album.thumb?t.album.thumb.photo_68:e.icon,") no-repeat center #e5ebf1"),backgroundSize:"cover"}}),after:r.a.createElement(g.c,{"data-track":JSON.stringify({index:a,url:t.url,title:t.title,artist:t.artist}),onChange:e.onCheckboxChange}),description:t.artist},t.title))})),r.a.createElement(g.f,{vertical:"bottom"},r.a.createElement(g.i,{wide:!0}),r.a.createElement(g.a,{onClick:this.sendTracks,size:"xl"},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c")))))}}]),a}(r.a.Component));o.a.send("VKWebAppInit"),i.a.render(r.a.createElement(f,null),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.68aa9389.chunk.js.map
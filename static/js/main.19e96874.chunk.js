(this.webpackJsonpaudio_bot_app=this.webpackJsonpaudio_bot_app||[]).push([[0],{158:function(e,t,n){e.exports=n(248)},247:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);n(159),n(185),n(187),n(188),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227);var a=n(0),r=n.n(a),c=n(81),i=n.n(c),s=n(14),o=n.n(s),l=n(33),u=n.n(l),d=n(51),p=n(82),h=n(83),m=n(88),k=n(87),g=n(21),f=(n(246),n(247),function(e){Object(m.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).pickedTracks=[],a.vkId=null,a.telegramId=null,a.icon="data:image/svg+xml;charset=utf-8,%3Csvg%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22m0%200h24v24h-24z%22%20opacity%3D%22.4%22%2F%3E%3Cpath%20d%3D%22m13%2011.4849987v5.6482897c0%204.5123987-.8747233%205.3834431-4.37440289%205.8421935-1.6682259.2186769-3.62559711-.5384568-3.62559711-3.1617096%200-1.2814037.80181302-2.498263%202.46114282-2.8162494%201.26723039-.2428462-.09078118.0181935%202.77607228-.5140396.6959753-.1292083.7748413-.3782301.7748413-.908791%200-.2664094-.0013183-2.5951438-.0022416-4.1936475l-.0073943-.0003862v-4.31781414s-.0054461-2.05827203%200-3.08739758c.0065136-1.23086488.6796458-1.68321833%202.6637921-2.08397579%200%200%203.0232113-.57396781%204.6852252-.87541989.367783-.06670761.6485622.07018054.6485622.49202579%200%200-.0106774%202.62210108%200%204.05433854.0031006.41590408-.168424.60420104-.5899711.67902227-1.6816987.29848801-4.8649278.86036181-4.8649278.86036181-.3738792.09182758-.5451011.35499958-.5451011.73329156z%22%20fill%3D%22%236f99c8%22%20fill-rule%3D%22nonzero%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E",a.API_URL="https://s23209.h10.modhost.pro",a.onCheckboxChange=function(e){var t=JSON.parse(e.currentTarget.dataset.track);a.pickedTracks[t.index]=a.pickedTracks[t.index]?null:{url:t.url,title:t.title,artist:t.artist}},a.sendTracks=function(){a.pickedTracks=a.pickedTracks.filter((function(e){return!!e})),a.pickedTracks.length&&fetch("".concat(a.API_URL,"/sendTracks?id=").concat(a.telegramId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.pickedTracks)})},a.state={scheme:"bright_light",tracks:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.a.subscribe(function(){var e=Object(d.a)(u.a.mark((function e(n){var a,r,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.detail,r=a.type,c=a.data,"VKWebAppUpdateConfig"!==r){e.next=5;break}t.setState({scheme:c.scheme}),e.next=27;break;case 5:if("VKWebAppInitResult"!==r){e.next=27;break}return e.next=8,o.a.send("VKWebAppGetUserInfo",{});case 8:return t.vkId=e.sent.id,e.next=11,o.a.send("VKWebAppStorageGet",{keys:["telegramId"]});case 11:if(t.telegramId=e.sent.keys[0].value,console.log(t.telegramId),!1!==t.telegramId&&"false"!==t.telegramId){e.next=26;break}return e.next=16,fetch("".concat(t.API_URL,"/getUser?id=").concat(t.vkId)).then((function(e){return e.json()}));case 16:return i=e.sent,console.log(i),i.permission,t.telegramId=i.telegramId,t.telegramId,e.next=24,o.a.send("VKWebAppStorageSet",{key:"telegramId",value:"".concat(t.telegramId)});case 24:s=e.sent,console.log(s);case 26:fetch("".concat(t.API_URL,"/getTracks?id=").concat(t.vkId)).then((function(e){return e.json()})).then((function(e){t.pickedTracks=new Array(e.tracks.length),t.setState({tracks:e.tracks})}));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(g.d,{scheme:this.state.scheme},r.a.createElement(g.k,{activePanel:"main"},r.a.createElement(g.g,{id:"main"},r.a.createElement(g.h,null,"Audio Bot"),this.state.tracks.map((function(t,n){return r.a.createElement(g.e,{key:t.id},r.a.createElement(g.j,{before:r.a.createElement(g.b,{size:"m",style:{width:40,height:40,marginRight:10,background:"url(".concat(t.album?t.album.thumb.photo_68:e.icon,") no-repeat center #e5ebf1"),backgroundSize:"cover"}}),after:r.a.createElement(g.c,{"data-track":JSON.stringify({index:n,url:t.url,title:t.title,artist:t.artist}),onChange:e.onCheckboxChange}),description:t.artist},t.title))})),r.a.createElement(g.f,{vertical:"bottom"},r.a.createElement(g.i,{wide:!0}),r.a.createElement(g.a,{onClick:this.sendTracks,size:"xl"},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c")))))}}]),n}(r.a.Component));o.a.send("VKWebAppInit"),i.a.render(r.a.createElement(f,null),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.19e96874.chunk.js.map